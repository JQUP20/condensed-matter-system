<template>
  <div class="chapter-content">
    <div class="chapter-header">
      <h1>18.3.1 ç›‘ç£å­¦ä¹ </h1>
      <p class="chapter-subtitle">æœ‰ç›‘ç£çš„ç›¸å˜è¯†åˆ«</p>
    </div>

    <div class="content-section">
      <h2>ç›‘ç£å­¦ä¹ åœ¨ç›¸å˜è¯†åˆ«ä¸­çš„åº”ç”¨</h2>
      <p>
        ç›‘ç£å­¦ä¹ æ˜¯æœºå™¨å­¦ä¹ çš„ä¸€ä¸ªé‡è¦åˆ†æ”¯ï¼Œåœ¨å‡èšæ€ç‰©ç†ä¸­å¯ä»¥ç”¨æ¥è¯†åˆ«å’Œåˆ†ç±»ä¸åŒçš„ç‰©è´¨ç›¸ã€‚
        é€šè¿‡è®­ç»ƒç¥ç»ç½‘ç»œå­¦ä¹ å·²çŸ¥ç›¸çš„ç‰¹å¾ï¼Œæˆ‘ä»¬å¯ä»¥é¢„æµ‹æœªçŸ¥ç³»ç»Ÿçš„ç›¸æ€ã€‚
      </p>

      <div class="workflow-diagram">
        <h3>ç›‘ç£å­¦ä¹ å·¥ä½œæµç¨‹</h3>
        <div class="workflow-steps">
          <div class="step">
            <div class="step-icon">ğŸ“Š</div>
            <h4>æ•°æ®å‡†å¤‡</h4>
            <p>æ”¶é›†ä¸åŒç›¸æ€çš„é…ç½®æ•°æ®</p>
          </div>
          <div class="arrow">â†’</div>
          <div class="step">
            <div class="step-icon">ğŸ·ï¸</div>
            <h4>æ ‡ç­¾æ ‡æ³¨</h4>
            <p>ä¸ºæ¯ä¸ªé…ç½®æ ‡æ³¨ç›¸æ€æ ‡ç­¾</p>
          </div>
          <div class="arrow">â†’</div>
          <div class="step">
            <div class="step-icon">ğŸ§ </div>
            <h4>æ¨¡å‹è®­ç»ƒ</h4>
            <p>è®­ç»ƒåˆ†ç±»å™¨å­¦ä¹ ç‰¹å¾</p>
          </div>
          <div class="arrow">â†’</div>
          <div class="step">
            <div class="step-icon">ğŸ¯</div>
            <h4>ç›¸æ€é¢„æµ‹</h4>
            <p>å¯¹æ–°é…ç½®è¿›è¡Œç›¸æ€åˆ†ç±»</p>
          </div>
        </div>
      </div>

      <h2>ç»å…¸åº”ç”¨ï¼šä¼Šè¾›æ¨¡å‹ç›¸å˜</h2>
      <div class="ising-model">
        <h3>äºŒç»´ä¼Šè¾›æ¨¡å‹</h3>
        <p>è€ƒè™‘äºŒç»´ä¼Šè¾›æ¨¡å‹çš„å“ˆå¯†é¡¿é‡ï¼š</p>
        <div class="formula-container">
          <div class="math-display">
            $$H = -J \sum_{\langle i,j \rangle} s_i s_j - h \sum_i s_i$$
          </div>
          <p>å…¶ä¸­ $s_i = \pm 1$ æ˜¯è‡ªæ—‹å˜é‡ï¼Œ$J$ æ˜¯äº¤æ¢è€¦åˆå¸¸æ•°ã€‚</p>
        </div>

        <div class="phase-diagram">
          <h4>ç›¸å›¾ç‰¹å¾</h4>
          <div class="phases">
            <div class="phase-card ordered">
              <h5>æœ‰åºç›¸ (T < T_c)</h5>
              <ul>
                <li>è‡ªå‘ç£åŒ– $m \neq 0$</li>
                <li>é•¿ç¨‹åºå‚é‡</li>
                <li>è‡ªæ—‹å›¢ç°‡å¤§</li>
              </ul>
            </div>
            <div class="phase-card disordered">
              <h5>æ— åºç›¸ (T > T_c)</h5>
              <ul>
                <li>å¹³å‡ç£åŒ– $m = 0$</li>
                <li>çŸ­ç¨‹å…³è”</li>
                <li>è‡ªæ—‹éšæœºåˆ†å¸ƒ</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <h2>ç‰¹å¾å·¥ç¨‹</h2>
      <div class="feature-engineering">
        <h3>ä¼ ç»Ÿç‰¹å¾</h3>
        <div class="traditional-features">
          <div class="feature">
            <h4>ç£åŒ–å¼ºåº¦</h4>
            <div class="math-display">
              $$m = \frac{1}{N} \sum_i s_i$$
            </div>
          </div>
          <div class="feature">
            <h4>èƒ½é‡å¯†åº¦</h4>
            <div class="math-display">
              $$e = \frac{1}{N} \langle H \rangle$$
            </div>
          </div>
          <div class="feature">
            <h4>æ¯”çƒ­</h4>
            <div class="math-display">
              $$C = \frac{\partial \langle E \rangle}{\partial T}$$
            </div>
          </div>
          <div class="feature">
            <h4>ç£åŒ–ç‡</h4>
            <div class="math-display">
              $$\chi = \frac{\partial \langle M \rangle}{\partial h}$$
            </div>
          </div>
        </div>

        <h3>æ·±åº¦å­¦ä¹ ç‰¹å¾</h3>
        <p>
          å·ç§¯ç¥ç»ç½‘ç»œå¯ä»¥è‡ªåŠ¨å­¦ä¹ ç©ºé—´ç‰¹å¾ï¼Œæ— éœ€æ‰‹å·¥è®¾è®¡ç‰¹å¾ã€‚
          ç½‘ç»œèƒ½å¤Ÿè¯†åˆ«ï¼š
        </p>
        <ul>
          <li>å±€åŸŸè‡ªæ—‹å…³è”æ¨¡å¼</li>
          <li>ç•´å£ç»“æ„</li>
          <li>æ¶¡æ—‹å’Œåæ¶¡æ—‹</li>
          <li>ä¸´ç•Œæ¶¨è½</li>
        </ul>
      </div>

      <h2>ç½‘ç»œæ¶æ„è®¾è®¡</h2>
      <div class="network-architecture">
        <h3>CNNåˆ†ç±»å™¨</h3>
        <div class="cnn-layers">
          <div class="layer input-layer">
            <h4>è¾“å…¥å±‚</h4>
            <p>$L \times L$ è‡ªæ—‹é…ç½®</p>
            <span class="layer-size">32Ã—32Ã—1</span>
          </div>
          <div class="layer conv-layer">
            <h4>å·ç§¯å±‚1</h4>
            <p>32ä¸ª3Ã—3å·ç§¯æ ¸</p>
            <span class="layer-size">30Ã—30Ã—32</span>
          </div>
          <div class="layer pool-layer">
            <h4>æ± åŒ–å±‚1</h4>
            <p>2Ã—2æœ€å¤§æ± åŒ–</p>
            <span class="layer-size">15Ã—15Ã—32</span>
          </div>
          <div class="layer conv-layer">
            <h4>å·ç§¯å±‚2</h4>
            <p>64ä¸ª3Ã—3å·ç§¯æ ¸</p>
            <span class="layer-size">13Ã—13Ã—64</span>
          </div>
          <div class="layer pool-layer">
            <h4>æ± åŒ–å±‚2</h4>
            <p>2Ã—2æœ€å¤§æ± åŒ–</p>
            <span class="layer-size">6Ã—6Ã—64</span>
          </div>
          <div class="layer fc-layer">
            <h4>å…¨è¿æ¥å±‚</h4>
            <p>128ä¸ªç¥ç»å…ƒ</p>
            <span class="layer-size">128</span>
          </div>
          <div class="layer output-layer">
            <h4>è¾“å‡ºå±‚</h4>
            <p>2ä¸ªç±»åˆ«</p>
            <span class="layer-size">2</span>
          </div>
        </div>
      </div>

      <h2>è®­ç»ƒç­–ç•¥</h2>
      <div class="training-strategies">
        <div class="strategy">
          <h3>æ•°æ®å¢å¼º</h3>
          <div class="augmentation-methods">
            <div class="method">
              <h4>æ—‹è½¬</h4>
              <p>90Â°ã€180Â°ã€270Â°æ—‹è½¬</p>
            </div>
            <div class="method">
              <h4>ç¿»è½¬</h4>
              <p>æ°´å¹³å’Œå‚ç›´ç¿»è½¬</p>
            </div>
            <div class="method">
              <h4>å¹³ç§»</h4>
              <p>å‘¨æœŸæ€§è¾¹ç•Œæ¡ä»¶ä¸‹çš„å¹³ç§»</p>
            </div>
          </div>
        </div>

        <div class="strategy">
          <h3>æ­£åˆ™åŒ–æŠ€æœ¯</h3>
          <ul>
            <li><strong>Dropout:</strong> é˜²æ­¢è¿‡æ‹Ÿåˆ</li>
            <li><strong>æ‰¹å½’ä¸€åŒ–:</strong> åŠ é€Ÿè®­ç»ƒ</li>
            <li><strong>æƒé‡è¡°å‡:</strong> L2æ­£åˆ™åŒ–</li>
            <li><strong>æ—©åœ:</strong> ç›‘æ§éªŒè¯æŸå¤±</li>
          </ul>
        </div>
      </div>

      <h2>æ€§èƒ½è¯„ä¼°</h2>
      <div class="performance-metrics">
        <h3>åˆ†ç±»æŒ‡æ ‡</h3>
        <div class="metrics-grid">
          <div class="metric">
            <h4>å‡†ç¡®ç‡</h4>
            <div class="math-display">
              $$\text{Accuracy} = \frac{TP + TN}{TP + TN + FP + FN}$$
            </div>
          </div>
          <div class="metric">
            <h4>ç²¾ç¡®ç‡</h4>
            <div class="math-display">
              $$\text{Precision} = \frac{TP}{TP + FP}$$
            </div>
          </div>
          <div class="metric">
            <h4>å¬å›ç‡</h4>
            <div class="math-display">
              $$\text{Recall} = \frac{TP}{TP + FN}$$
            </div>
          </div>
          <div class="metric">
            <h4>F1åˆ†æ•°</h4>
            <div class="math-display">
              $$F1 = 2 \cdot \frac{\text{Precision} \times \text{Recall}}{\text{Precision} + \text{Recall}}$$
            </div>
          </div>
        </div>
      </div>

      <h2>å®éªŒç»“æœ</h2>
      <div class="experimental-results">
        <h3>å…¸å‹ç»“æœ</h3>
        <div class="results-table">
          <table>
            <thead>
              <tr>
                <th>æ¨¡å‹</th>
                <th>å‡†ç¡®ç‡</th>
                <th>è®­ç»ƒæ—¶é—´</th>
                <th>ç‰¹ç‚¹</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>ä¼ ç»Ÿç‰¹å¾+SVM</td>
                <td>85.2%</td>
                <td>å¿«</td>
                <td>éœ€è¦é¢†åŸŸçŸ¥è¯†</td>
              </tr>
              <tr>
                <td>ç®€å•CNN</td>
                <td>94.7%</td>
                <td>ä¸­ç­‰</td>
                <td>è‡ªåŠ¨ç‰¹å¾å­¦ä¹ </td>
              </tr>
              <tr>
                <td>æ·±åº¦CNN</td>
                <td>98.3%</td>
                <td>æ…¢</td>
                <td>æœ€ä½³æ€§èƒ½</td>
              </tr>
              <tr>
                <td>ResNet</td>
                <td>99.1%</td>
                <td>æ…¢</td>
                <td>å¤„ç†æ·±å±‚ç½‘ç»œ</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <h2>æŒ‘æˆ˜ä¸å±€é™</h2>
      <div class="challenges">
        <div class="challenge-card">
          <h3>æ•°æ®éœ€æ±‚</h3>
          <p>éœ€è¦å¤§é‡æ ‡æ³¨æ•°æ®ï¼Œè·å–æˆæœ¬é«˜</p>
        </div>
        <div class="challenge-card">
          <h3>æ³›åŒ–èƒ½åŠ›</h3>
          <p>å¯¹æœªè§è¿‡çš„ç³»ç»Ÿæ³›åŒ–èƒ½åŠ›æœ‰é™</p>
        </div>
        <div class="challenge-card">
          <h3>ä¸´ç•Œç‚¹è¯†åˆ«</h3>
          <p>ç›¸å˜ç‚¹é™„è¿‘çš„åˆ†ç±»å›°éš¾</p>
        </div>
        <div class="challenge-card">
          <h3>å¯è§£é‡Šæ€§</h3>
          <p>éš¾ä»¥ç†è§£ç½‘ç»œå­¦åˆ°çš„ç‰©ç†ç‰¹å¾</p>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: 'Chapter18_3_1',
  mounted() {
    // æ¸²æŸ“æ•°å­¦å…¬å¼
    if (window.renderMathInElement) {
      this.$nextTick(() => {
        window.renderMathInElement(this.$el);
      });
    }
  },
  updated() {
    // æ›´æ–°æ—¶é‡æ–°æ¸²æŸ“æ•°å­¦å…¬å¼
    if (window.renderMathInElement) {
      this.$nextTick(() => {
        window.renderMathInElement(this.$el);
      });
    }
  }
}
</script>

<style scoped>
.chapter-content {
  max-width: 1000px;
  margin: 0 auto;
  padding: 20px;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  line-height: 1.6;
  color: #333;
}

.chapter-header {
  text-align: center;
  margin-bottom: 40px;
  padding-bottom: 20px;
  border-bottom: 3px solid #00BCD4;
}

.chapter-header h1 {
  font-size: 2.5em;
  color: #2c3e50;
  margin-bottom: 10px;
}

.chapter-subtitle {
  font-size: 1.2em;
  color: #7f8c8d;
  font-style: italic;
}

.content-section {
  margin-bottom: 30px;
}

.content-section h2 {
  color: #34495e;
  font-size: 1.8em;
  margin-top: 30px;
  margin-bottom: 15px;
  padding-left: 10px;
  border-left: 4px solid #00BCD4;
}

.content-section h3 {
  color: #2c3e50;
  font-size: 1.4em;
  margin-top: 20px;
  margin-bottom: 10px;
}

.content-section p {
  margin-bottom: 15px;
  text-align: justify;
}

.formula-container {
  background: #f8f9fa;
  padding: 20px;
  border-radius: 8px;
  margin: 20px 0;
  border-left: 4px solid #00BCD4;
}

.math-display {
  text-align: center;
  margin: 15px 0;
  font-size: 1.1em;
}

.workflow-diagram {
  background: #e0f2f1;
  padding: 20px;
  border-radius: 8px;
  margin: 20px 0;
}

.workflow-steps {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-wrap: wrap;
  gap: 10px;
  margin: 20px 0;
}

.step {
  background: white;
  padding: 20px;
  border-radius: 10px;
  text-align: center;
  min-width: 150px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.step-icon {
  font-size: 2em;
  margin-bottom: 10px;
}

.step h4 {
  color: #00695c;
  margin-bottom: 8px;
  font-size: 1.1em;
}

.step p {
  font-size: 0.9em;
  color: #555;
  margin: 0;
}

.arrow {
  font-size: 1.5em;
  color: #00BCD4;
  font-weight: bold;
}

.ising-model {
  background: #fff3e0;
  padding: 20px;
  border-radius: 8px;
  margin: 20px 0;
}

.phase-diagram {
  margin-top: 20px;
}

.phases {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin: 15px 0;
}

.phase-card {
  padding: 15px;
  border-radius: 8px;
  color: white;
}

.ordered {
  background: linear-gradient(135deg, #1976d2, #1565c0);
}

.disordered {
  background: linear-gradient(135deg, #d32f2f, #c62828);
}

.phase-card h5 {
  color: white;
  margin-bottom: 10px;
}

.phase-card ul {
  margin-left: 20px;
}

.phase-card li {
  margin-bottom: 5px;
  font-size: 0.9em;
}

.feature-engineering {
  background: #f3e5f5;
  padding: 20px;
  border-radius: 8px;
  margin: 20px 0;
}

.traditional-features {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px;
  margin: 20px 0;
}

.feature {
  background: white;
  padding: 15px;
  border-radius: 8px;
  text-align: center;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.feature h4 {
  color: #7b1fa2;
  margin-bottom: 10px;
}

.network-architecture {
  background: #e8f5e8;
  padding: 20px;
  border-radius: 8px;
  margin: 20px 0;
}

.cnn-layers {
  display: flex;
  flex-direction: column;
  gap: 15px;
  margin: 20px 0;
}

.layer {
  background: white;
  padding: 15px;
  border-radius: 8px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.layer h4 {
  color: #2e7d32;
  margin: 0;
  font-size: 1.1em;
}

.layer p {
  color: #555;
  margin: 0;
  font-size: 0.9em;
}

.layer-size {
  background: #4CAF50;
  color: white;
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 0.8em;
  font-weight: bold;
}

.training-strategies {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin: 20px 0;
}

.strategy {
  background: #e3f2fd;
  padding: 20px;
  border-radius: 8px;
}

.strategy h3 {
  color: #1976d2;
  margin-bottom: 15px;
}

.augmentation-methods {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
  gap: 10px;
}

.method {
  background: white;
  padding: 10px;
  border-radius: 6px;
  text-align: center;
}

.method h4 {
  color: #1976d2;
  margin-bottom: 5px;
  font-size: 1em;
}

.method p {
  font-size: 0.8em;
  color: #555;
  margin: 0;
}

.performance-metrics {
  background: #fff8e1;
  padding: 20px;
  border-radius: 8px;
  margin: 20px 0;
}

.metrics-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px;
  margin: 20px 0;
}

.metric {
  background: white;
  padding: 15px;
  border-radius: 8px;
  text-align: center;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.metric h4 {
  color: #f57c00;
  margin-bottom: 10px;
}

.experimental-results {
  margin: 20px 0;
}

.results-table {
  overflow-x: auto;
  margin: 20px 0;
}

.results-table table {
  width: 100%;
  border-collapse: collapse;
  background: white;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  border-radius: 8px;
  overflow: hidden;
}

.results-table th,
.results-table td {
  padding: 12px 15px;
  text-align: center;
  border-bottom: 1px solid #ddd;
}

.results-table th {
  background: #00BCD4;
  color: white;
  font-weight: 600;
}

.results-table tr:hover {
  background: #f5f5f5;
}

.challenges {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin: 20px 0;
}

.challenge-card {
  background: linear-gradient(135deg, #ff7043, #ff5722);
  color: white;
  padding: 20px;
  border-radius: 10px;
  text-align: center;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.challenge-card h3 {
  color: white;
  margin-bottom: 10px;
}

.challenge-card p {
  font-size: 0.95em;
  margin: 0;
}

@media (max-width: 768px) {
  .chapter-content {
    padding: 15px;
  }
  
  .chapter-header h1 {
    font-size: 2em;
  }
  
  .workflow-steps {
    flex-direction: column;
  }
  
  .arrow {
    transform: rotate(90deg);
  }
  
  .phases {
    grid-template-columns: 1fr;
  }
  
  .traditional-features {
    grid-template-columns: 1fr;
  }
  
  .training-strategies {
    grid-template-columns: 1fr;
  }
  
  .metrics-grid {
    grid-template-columns: 1fr;
  }
  
  .challenges {
    grid-template-columns: 1fr;
  }
}
</style>